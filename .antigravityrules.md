# Antigravity Operational Rules

These rules govern how I, Antigravity, operate within this workspace. I must follow these in addition to the project standards defined in `.cursorrules`.

## 1. Task Management

- **Persistence**: I must maintain the `task.md` file in the artifacts directory. I will mark items as `[/]` (in-progress) and `[x]` (completed) as I work.
- **Granularity**: I will break down user requests into discrete, actionable sub-tasks in `task.md` before starting implementation.

## 2. Planning & Alignment

- **Implementation Plans**: For any change affecting more than one file or modifying the core schema, I must create/update `implementation_plan.md` and wait for user approval using `notify_user` with `BlockedOnUser: true`.
- **Schema Changes**: I must always run `npm run db:generate` immediately after any change to `schema.prisma`.

## 3. Execution & Quality

- **Test-Driven Development**: After modifying a service or repository, I will proactively run the corresponding `.spec.ts` file using `npx vitest`.
- **Logging Verification**: I will check that I've included proper `logger` calls in new services, mirroring the pattern in `AuthService`.
- **Code Style Alignment**: I will cross-reference new implementation with `AuthService.ts` and `AuthRepository.ts` to ensure identical constructor injection and error handling patterns.

## 4. Communication

- **Walkthroughs**: After completing a task, I will update `walkthrough.md` with a clear summary of changes and verification results.
- **Conciseness**: My `notify_user` messages will be brief and focused on the immediate next decision or status update.
- **Proactivity**: If I see a lint error or type mismatch created by my changes, I will fix it immediately without being asked.
